(this["webpackJsonpgithub-pages"]=this["webpackJsonpgithub-pages"]||[]).push([[7],{102:function(t,e,n){"use strict";function i(t,e,n,i,r,o,a){try{var u=t[o](a),c=u.value}catch(s){return void n(s)}u.done?e(c):Promise.resolve(c).then(i,r)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function u(t){i(a,r,o,u,c,"next",t)}function c(t){i(a,r,o,u,c,"throw",t)}u(void 0)}))}}n.d(e,"a",(function(){return r}))},150:function(t,e){},151:function(t,e){},159:function(t,e){},160:function(t,e){},170:function(t,e){},187:function(t,e){},188:function(t,e){},212:function(t,e){},214:function(t,e){},215:function(t,e){},218:function(t,e){},219:function(t,e){},224:function(t,e){},225:function(t,e){},233:function(t,e){},239:function(t,e){},242:function(t,e){},515:function(t,e,n){"use strict";n.r(e);var i,r,o,a,u,c=n(0),s=n.n(c),d=n(101),b=n.n(d),l=n(102),p=n(103),f=n(70),g=n(83),v=n(104),m=(n(105),n(51)),j=n(141),h=n.n(j),O=n(19),y=(i=function(){function t(){var e=this;Object(f.a)(this,t),Object(p.a)(this,"model",r,this),Object(p.a)(this,"updating",o,this),this.liveQuery=void 0,this.subscribe=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=new h.a.Query("Movie");t&&n.find().then((function(t){e.model=t.map((function(t){return e.db2model(t)}))})),n.subscribe().then((function(t){e.liveQuery=t,t.on("create",(function(t){if(void 0!==t){var n=e.db2model(t);e.updating=!1,e.model.push(n)}})),t.on("update",(function(t){if(void 0!==t){var n=e.db2model(t),i=e.model.indexOf(n);i>-1&&(e.model[i]=n)}})),t.on("delete",(function(t){if(void 0!==t){var n=e.model.indexOf(e.db2model(t));n>-1&&e.model.splice(n,1)}}))}))},this.unSubscribe=function(){var t;null===(t=e.liveQuery)||void 0===t||t.unsubscribe()},Object(p.a)(this,"create",a,this),Object(p.a)(this,"delete",u,this),Object(m.f)(this),void 0!==h.a.applicationId&&void 0!==h.a.applicationKey||h.a.init({appId:Object(O.a)("U2FsdGVkX19VXtGCxmolOxbQeih2/nrrpHUdRBk6yG19bAOgbuGI4vfcuvXq7rCW+ydHLDFTGNashYbeN+0HBQ=="),appKey:Object(O.a)("U2FsdGVkX185dqqTK57a0dJP9OLEqRo6dMt8YFTHQzJW7Yvq+WmZ5PNU/9LdAxbL")})}return Object(g.a)(t,[{key:"db2model",value:function(t){return{id:t.get("id"),poster:t.get("poster"),year:t.get("year"),released:t.get("released"),runtime:t.get("runtime"),genre:t.get("genre"),director:t.get("director"),writer:t.get("writer"),actors:t.get("actors"),plot:t.get("plot"),language:t.get("language"),country:t.get("country"),awards:t.get("awards"),imdb:t.get("imdbd"),douban:t.get("douban"),rottenTomatoes:t.get("rottenTomatoes"),rating:t.get("rating"),title:t.get("title"),ref:t.get("objectId")}}},{key:"movies",get:function(){return this.model}},{key:"isUpdating",get:function(){return this.updating}}]),t}(),r=Object(v.a)(i.prototype,"model",[m.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=Object(v.a)(i.prototype,"updating",[m.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=Object(v.a)(i.prototype,"create",[m.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(){var e=Object(l.a)(b.a.mark((function e(n){var i,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.updating=!0,i=h.a.Object.extend("Movie"),(r=new i).set("id",n.id),r.set("poster",n.poster),r.set("year",n.year),r.set("released",n.released),r.set("runtime",n.runtime),r.set("genre",n.genre),r.set("director",n.director),r.set("writer",n.writer),r.set("actors",n.actors),r.set("plot",n.plot),r.set("language",n.language),r.set("country",n.country),r.set("awards",n.awards),r.set("imdb",n.imdb),r.set("douban",n.douban),r.set("rottenTomatoes",n.rottenTomatoes),r.set("rating",n.rating),r.set("title",n.title),e.abrupt("return",r.save());case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),u=Object(v.a)(i.prototype,"delete",[m.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e){t.updating=!0,h.a.Object.createWithoutData("Movie",e).destroy()}}}),Object(v.a)(i.prototype,"movies",[m.c],Object.getOwnPropertyDescriptor(i.prototype,"movies"),i.prototype),Object(v.a)(i.prototype,"isUpdating",[m.c],Object.getOwnPropertyDescriptor(i.prototype,"isUpdating"),i.prototype),i),w=new y,x=s.a.createContext(w),k=n(81),U=n(1),T=Object(k.a)((function(){return Object(c.useContext)(x).isUpdating?Object(U.jsx)("p",{children:"Updating..."}):null})),P=function(t){return Object(U.jsxs)("div",{style:{border:"1px solid"},children:[Object(U.jsx)("img",{src:t.movie.poster,alt:t.movie.title}),Object(U.jsxs)("p",{children:[" ",t.movie.title," "]})]})},Q=Object(k.a)((function(){var t=Object(c.useContext)(x);return Object(U.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:20,padding:10},children:t.movies.map((function(t){return Object(U.jsx)(P,{movie:t},t.id)}))})}));e.default=function(){var t=new y;return Object(c.useEffect)((function(){return t.subscribe(),function(){t.unSubscribe()}})),Object(U.jsxs)(x.Provider,{value:t,children:[Object(U.jsx)(Q,{}),Object(U.jsx)(T,{})]})}},75:function(t,e){}}]);
//# sourceMappingURL=7.a326b271.chunk.js.map