(this["webpackJsonpgithub-pages"]=this["webpackJsonpgithub-pages"]||[]).push([[0],{107:function(e,t){},307:function(e,t,n){},308:function(e,t){},325:function(e,t,n){},381:function(e,t){},383:function(e,t){},411:function(e,t){},412:function(e,t){},453:function(e,t){},518:function(e,t){},520:function(e,t){},548:function(e,t){},550:function(e,t){},551:function(e,t){},556:function(e,t){},558:function(e,t){},564:function(e,t){},566:function(e,t){},585:function(e,t){},597:function(e,t){},600:function(e,t){},626:function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),c=n(116),o=n.n(c),a=(n(307),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var u=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,631)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),c(e),o(e)}))},l=n(57),d=n(3),b=n(19),f=n(170),p=n.n(f),j=n(171),h=n.n(j),x=function(e){return"Hello, React&App"===p.a.decrypt("U2FsdGVkX188/AO4D/R1RFTPjxyveU/Y+6jmDIbN4fYatwhuTXYU0yBUO5DwXVzx",e).toString(h.a)},O=function(){var e=localStorage.getItem("private key");return!(!e||0===e.length||!x(e))},g=function(e){var t=localStorage.getItem("private key");if(t&&0!==t.length&&e&&0!==e.length)return p.a.decrypt(e,t).toString(h.a);throw Error("decrypt ".concat(e," failed"))},v=n(0);function y(){return Object(v.jsx)("p",{children:"Home"})}var m,w,k,C,T,S,D,P=n(17),I=n.n(P),U=n(33),L=n(21),z=n(6),X=n(7),M=n(13),R=(n(131),n(9)),F=n(46),A=n.n(F),V=n(295),E=n.n(V),W=n(299);n(184),function(e){e[e.Eval=0]="Eval",e[e.Var=1]="Var",e[e.Defint=2]="Defint",e[e.Limit=3]="Limit",e[e.Matrix=4]="Matrix"}(D||(D={}));var B=(m=function(){function e(){var t=this;Object(z.a)(this,e),Object(L.a)(this,"latex",w,this),Object(L.a)(this,"history",k,this),this.db=void 0,this.parser=new E.a,this.initHistory=Object(U.a)(I.a.mark((function e(){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.a)("expr-db",1,{upgrade:function(e){e.createObjectStore("expressions",{keyPath:"date"})}});case 2:return n=e.sent,t.db=n,e.next=6,n.getAll("expressions");case 6:r=e.sent,Object(R.h)((function(){t.history=r}));case 8:case"end":return e.stop()}}),e)}))),Object(L.a)(this,"update",C,this),Object(L.a)(this,"save",T,this),Object(L.a)(this,"deleteHistory",S,this),Object(R.f)(this)}return Object(X.a)(e,[{key:"expression",get:function(){try{return this.parser.parseLatex(this.latex).toNerdamer()}catch(e){return}}},{key:"eval",get:function(){try{return this.expression.evaluate().text()}catch(e){return}}},{key:"text",get:function(){try{var e,t=null===(e=this.expression)||void 0===e?void 0:e.toTeX();return Q.forEach((function(e,n){var r;return t=null===(r=t)||void 0===r?void 0:r.replace(n,e)})),t}catch(n){return}}},{key:"mode",get:function(){try{return this.latex.search("int")>=0?D.Defint:this.latex.search("limit")>=0?D.Limit:this.latex.search("matrix")>=0?D.Matrix:this.latex.search("x")>=0?D.Var:D.Eval}catch(e){return D.Eval}}},{key:"solve",get:function(){try{return this.expression.solveFor("x").toTeX()}catch(e){return}}},{key:"integrate",get:function(){try{return A.a.integrate(this.expression,"x").toTeX()}catch(e){return}}},{key:"diff",get:function(){try{return A.a.diff(this.expression,"x").toTeX()}catch(e){return}}},{key:"getRawLaTeX",get:function(){return this.latex}},{key:"getHistory",get:function(){return this.history}}]),e}(),w=Object(M.a)(m.prototype,"latex",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=Object(M.a)(m.prototype,"history",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=Object(M.a)(m.prototype,"update",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.latex=t}}}),T=Object(M.a)(m.prototype,"save",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){if(e.db&&e.latex.length>0){var t={expStr:e.latex,date:Date.now()};e.db.put("expressions",t),e.history.push(t)}else console.log("Invalid save")}}}),S=Object(M.a)(m.prototype,"deleteHistory",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n;null===(n=e.db)||void 0===n||n.delete("expressions",t.date);var r=e.history.findIndex((function(e){return e.date===t.date}));r>-1&&e.history.splice(r,1)}}}),Object(M.a)(m.prototype,"expression",[R.c],Object.getOwnPropertyDescriptor(m.prototype,"expression"),m.prototype),Object(M.a)(m.prototype,"eval",[R.c],Object.getOwnPropertyDescriptor(m.prototype,"eval"),m.prototype),Object(M.a)(m.prototype,"text",[R.c],Object.getOwnPropertyDescriptor(m.prototype,"text"),m.prototype),Object(M.a)(m.prototype,"mode",[R.c],Object.getOwnPropertyDescriptor(m.prototype,"mode"),m.prototype),Object(M.a)(m.prototype,"solve",[R.c],Object.getOwnPropertyDescriptor(m.prototype,"solve"),m.prototype),Object(M.a)(m.prototype,"integrate",[R.c],Object.getOwnPropertyDescriptor(m.prototype,"integrate"),m.prototype),Object(M.a)(m.prototype,"diff",[R.c],Object.getOwnPropertyDescriptor(m.prototype,"diff"),m.prototype),Object(M.a)(m.prototype,"getRawLaTeX",[R.c],Object.getOwnPropertyDescriptor(m.prototype,"getRawLaTeX"),m.prototype),Object(M.a)(m.prototype,"getHistory",[R.c],Object.getOwnPropertyDescriptor(m.prototype,"getHistory"),m.prototype),m),Q=new Map([[RegExp("\\\\cdot","g"),"\\times"]]),H=i.a.createContext(new B),K=function(){return Object(r.useContext)(H)},N=function e(){var t=this;Object(z.a)(this,e),this.mfController=void 0,this.setController=function(e){t.mfController=e,t.focus()},this.add=function(e){return t.mfController.insert(e,{focus:!0,format:"latex"})},this.backspace=function(){t.mfController.executeCommand("deleteBackward"),t.focus()},this.clear=function(){t.mfController.executeCommand("deleteAll"),t.focus()},this.move=function(e){"forward"===e?t.mfController.executeCommand("moveToNextChar"):t.mfController.executeCommand("moveToPreviousChar"),t.focus()},this.focus=function(){t.mfController&&t.mfController.focus&&t.mfController.focus()}},J=new N,Y=i.a.createContext(J),q=n(4),G=n.p+"static/media/delete.020411b3.svg",Z=n.p+"static/media/backspace.521c7719.svg";n(325);function _(){return Object(v.jsx)("div",{style:{maxWidth:400,margin:"auto",userSelect:"none"},children:Object(v.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",justifyContent:"center",gap:2,gridAutoRows:"minmax(32px, auto)"},children:[$().map((function(e,t){return Object(v.jsx)("div",{children:Object(v.jsx)(te,{children:e.children,onclick:e.onclick},t)},"extra"+t)})),ee().map((function(e,t){return Object(v.jsx)("div",{children:Object(v.jsx)(te,{children:e.children,onclick:e.onclick},t)},"basic"+t)}))]})})}function $(){var e=Object(r.useContext)(Y),t=["sin","cos","tan","log"].map((function(t){return{children:t,onclick:function(){e.add("\\".concat(t,"({#?})"))}}}));t.push({children:"sqrt",onclick:function(){e.add("\\sqrt")}});var n=[{children:"asin",command:"\\arcsin({#?})"},{children:"cos",command:"\\arccos({#?})"},{children:"tan",command:"\\arctan({#?})"},{children:"e^",command:"e^{#?}"},{children:"^2",command:"{#?}^2"}].map((function(t){return{children:t.children,onclick:function(){return e.add(t.command)}}})),i=[{children:"frac",onclick:function(){return e.add("\\frac")}}];return["(",")"].map((function(t){return i.push({children:t,onclick:function(){e.add(t)}})})),i.push({children:"\u2190",onclick:function(){e.move("backword")}}),i.push({children:"\u2192",onclick:function(){e.move("forward")}}),[].concat(Object(q.a)(t),Object(q.a)(n),i)}function ee(){var e=Object(r.useContext)(Y),t=K(),n=["7","8","9"].map((function(t){return{children:t,onclick:function(){return e.add(t)}}}));n.push({children:Object(v.jsx)("img",{src:G,alt:"del",style:{width:20}}),onclick:function(){return e.clear()}}),n.push({children:Object(v.jsx)("img",{src:Z,alt:"backspace",style:{width:20}}),onclick:function(){return e.backspace()}});var i=["4","5","6","+","-"].map((function(t){return{children:t,onclick:function(){return e.add(t)}}})),c=["1","2","3","*","/"].map((function(t){return{children:t,onclick:function(){return e.add(t)}}})),o=["0",".","e"].map((function(t){return{children:t,onclick:function(){return e.add(t)}}}));return o.push({children:"pi",onclick:function(){return e.add("\\pi")}}),o.push({children:"=",onclick:function(){return t.save()}}),[].concat(Object(q.a)(n),Object(q.a)(i),Object(q.a)(c),Object(q.a)(o))}function te(e){return Object(v.jsx)("button",{onClick:e.onclick,style:{textTransform:"lowercase",height:"100%",width:"100%",background:"none"},children:"string"===typeof e.children?Object(v.jsxs)("span",{style:{fontFamily:"KaTeX",fontSize:20},children:[" ",e.children," "]}):e.children})}var ne=n(128);function re(){var e=K(),t=Object(r.useContext)(Y);return Object(v.jsx)(ne.a,{virtualKeyboardMode:"off",fontsDirectory:"../assets/fonts",onContentDidChange:function(t){return e.update(t.getValue("latex-expanded"))},ref:function(e){e&&t.setController(e)},style:{fontSize:24,marginBlock:5,border:"2px dashed black",backgroundColor:"white",gridColumn:"1/-1",outline:0}})}var ie=n(24),ce=n(297),oe=n.n(ce),ae=function(e){var t=Object(r.useRef)(null);return Object(r.useEffect)((function(){try{var n;oe()({target:null!==(n=t.current)&&void 0!==n?n:"",width:800,height:300,grid:!0,title:e.expStr,data:[{fn:e.expStr}]})}catch(r){}})),Object(v.jsx)("div",{ref:t})},se=Object(ie.a)((function(){switch(K().mode){case D.Eval:return Object(v.jsx)(ue,{});case D.Var:return Object(v.jsx)(le,{});default:return Object(v.jsx)(ue,{})}})),ue=Object(ie.a)((function(){var e=K(),t=e.eval,n=e.text;return void 0===t?e.getRawLaTeX?Object(v.jsx)(de,{title:"LaTeX",content:e.getRawLaTeX,useMathView:!1}):null:t===n?Object(v.jsxs)("div",{children:[Object(v.jsx)(de,{title:"LaTeX",content:e.getRawLaTeX,useMathView:!1}),Object(v.jsx)(de,{title:"Eval",content:"".concat(t),useMathView:!0})]}):Object(v.jsxs)("div",{children:[Object(v.jsx)(de,{title:"LaTeX",content:e.getRawLaTeX,useMathView:!1}),Object(v.jsx)(de,{title:"Eval",content:"".concat(e.text),useMathView:!0}),Object(v.jsx)(de,{title:"Calc",content:"".concat(e.eval),useMathView:!0})]})})),le=Object(ie.a)((function(){var e=K();return void 0===e.integrate?null:Object(v.jsxs)("div",{children:[Object(v.jsx)(de,{title:"LaTeX",content:e.getRawLaTeX,useMathView:!1}),Object(v.jsx)(de,{title:"Integrate",content:"".concat(e.integrate),useMathView:!0}),Object(v.jsx)(de,{title:"Diff",content:"".concat(e.diff),useMathView:!0}),e.eval?Object(v.jsx)(ae,{expStr:e.eval}):null]})})),de=function(e){var t=e.useMathView?Object(v.jsx)(be,{content:e.content}):Object(v.jsx)(fe,{content:e.content});return Object(v.jsxs)("div",{style:{border:"1px solid black"},children:[Object(v.jsx)("div",{style:{backgroundColor:"black",color:"white",padding:2,paddingLeft:10,fontFamily:"KaTeX",userSelect:"none"},children:e.title}),Object(v.jsx)("div",{style:{padding:5,paddingLeft:10},children:t})]})},be=function(e){var t=Object(r.useContext)(Y);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ne.a,{value:e.content,readOnly:!0,style:{outline:0,display:"inline-block"},fontsDirectory:"../assets/fonts"}),Object(v.jsx)("button",{style:{marginLeft:"20pt"},onClick:function(){t.clear(),t.add(e.content)},children:"+"})]})},fe=function(e){return Object(v.jsx)("span",{style:{fontFamily:"KaTeX"},children:e.content})},pe=se,je=Object(ie.a)((function(){var e=K();return Object(v.jsxs)("div",{style:{border:"1px solid black"},children:[Object(v.jsx)("div",{style:{backgroundColor:"black",color:"white",padding:5,paddingLeft:10},children:"History"}),Object(v.jsx)("ul",{style:{listStyleType:"none",paddingInline:10},children:e.getHistory.map((function(e,t){return Object(v.jsx)(he,{item:e},t)}))})]})})),he=function(e){var t=K();return Object(v.jsxs)("li",{style:{display:"flex",justifyContent:"space-between"},children:[Object(v.jsx)("span",{style:{marginRight:20},children:e.item.expStr}),Object(v.jsx)("button",{onClick:function(){t.deleteHistory(e.item)},children:"Del"})]})},xe=je;function Oe(){var e=new N,t=new B;return Object(r.useEffect)((function(){t.initHistory()})),Object(v.jsx)(Y.Provider,{value:e,children:Object(v.jsx)(H.Provider,{value:t,children:Object(v.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(v.jsxs)(ke,{children:[Object(v.jsx)(re,{}),Object(v.jsx)("div",{style:{gridColumn:"1/9"},children:Object(v.jsx)(pe,{})}),Object(v.jsx)("div",{style:{gridColumn:"9/-1"},children:Object(v.jsx)(xe,{})})]}),Object(v.jsx)("div",{style:{flexShrink:0},children:Object(v.jsx)(_,{})})]})})})}var ge,ve,ye,me,we,ke=function(e){return Object(v.jsx)("div",{style:{width:"90%",margin:"auto",flex:"1 0 auto"},children:Object(v.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)"},children:e.children})})},Ce=n(23),Te=n.n(Ce),Se=(ge=function(){function e(){var t=this;Object(z.a)(this,e),Object(L.a)(this,"model",ve,this),Object(L.a)(this,"updating",ye,this),this.liveQuery=void 0,this.subscribe=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=new Te.a.Query("Movie");e&&n.find().then((function(e){t.model=e.map((function(e){return t.db2model(e)}))})),n.subscribe().then((function(e){t.liveQuery=e,e.on("create",(function(e){if(void 0!==e){var n=t.db2model(e);t.updating=!1,t.model.push(n)}})),e.on("update",(function(e){if(void 0!==e){var n=t.db2model(e),r=t.model.indexOf(n);r>-1&&(t.model[r]=n)}})),e.on("delete",(function(e){if(void 0!==e){var n=t.model.indexOf(t.db2model(e));n>-1&&t.model.splice(n,1)}}))}))},this.unSubscribe=function(){var e;null===(e=t.liveQuery)||void 0===e||e.unsubscribe()},Object(L.a)(this,"create",me,this),Object(L.a)(this,"delete",we,this),Object(R.f)(this),void 0!==Te.a.applicationId&&void 0!==Te.a.applicationKey||O()&&Te.a.init({appId:g("U2FsdGVkX1/PnPqRu/oeYzTFO29twMC8ttrBe+gmlYQR8CN2Dd24tweTai2Ul1fxuePdi0AIyvfUvuSSLWlL8g=="),appKey:g("U2FsdGVkX18WN7yQQ+iPg+TJ36c9B4ro+22XKf4yMRJAluCifMz962Rmm4UI8Zc5")})}return Object(X.a)(e,[{key:"db2model",value:function(e){return{id:e.get("id"),poster:e.get("poster"),year:e.get("year"),released:e.get("released"),runtime:e.get("runtime"),genre:e.get("genre"),director:e.get("director"),writer:e.get("writer"),actors:e.get("actors"),plot:e.get("plot"),language:e.get("language"),country:e.get("country"),awards:e.get("awards"),imdb:e.get("imdbd"),douban:e.get("douban"),rottenTomatoes:e.get("rottenTomatoes"),rating:e.get("rating"),title:e.get("title"),ref:e.get("objectId")}}},{key:"movies",get:function(){return this.model}},{key:"isUpdating",get:function(){return this.updating}}]),e}(),ve=Object(M.a)(ge.prototype,"model",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ye=Object(M.a)(ge.prototype,"updating",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),me=Object(M.a)(ge.prototype,"create",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(U.a)(I.a.mark((function t(n){var r,i;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.updating=!0,r=Te.a.Object.extend("Movie"),(i=new r).set("id",n.id),i.set("poster",n.poster),i.set("year",n.year),i.set("released",n.released),i.set("runtime",n.runtime),i.set("genre",n.genre),i.set("director",n.director),i.set("writer",n.writer),i.set("actors",n.actors),i.set("plot",n.plot),i.set("language",n.language),i.set("country",n.country),i.set("awards",n.awards),i.set("imdb",n.imdb),i.set("douban",n.douban),i.set("rottenTomatoes",n.rottenTomatoes),i.set("rating",n.rating),i.set("title",n.title),t.abrupt("return",i.save());case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),we=Object(M.a)(ge.prototype,"delete",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.updating=!0,Te.a.Object.createWithoutData("Movie",t).destroy()}}}),Object(M.a)(ge.prototype,"movies",[R.c],Object.getOwnPropertyDescriptor(ge.prototype,"movies"),ge.prototype),Object(M.a)(ge.prototype,"isUpdating",[R.c],Object.getOwnPropertyDescriptor(ge.prototype,"isUpdating"),ge.prototype),ge),De=new Se,Pe=i.a.createContext(De),Ie=Object(ie.a)((function(){return Object(r.useContext)(Pe).isUpdating?Object(v.jsx)("p",{children:"Updating..."}):null})),Ue=function(e){return Object(v.jsxs)("div",{style:{border:"1px solid"},children:[Object(v.jsx)("img",{src:e.movie.poster,alt:e.movie.title}),Object(v.jsxs)("p",{children:[" ",e.movie.title," "]})]})},Le=Object(ie.a)((function(){var e=Object(r.useContext)(Pe);return Object(v.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:20,padding:10},children:e.movies.map((function(e){return Object(v.jsx)(Ue,{movie:e},e.id)}))})}));var ze,Xe,Me,Re,Fe,Ae,Ve,Ee,We=function(){var e=new Se;return Object(r.useEffect)((function(){return e.subscribe(),function(){e.unSubscribe()}})),Object(v.jsxs)(Pe.Provider,{value:e,children:[Object(v.jsx)(Le,{}),Object(v.jsx)(Ie,{})]})},Be=(ze=function(){function e(){var t=this;Object(z.a)(this,e),Object(L.a)(this,"models",Xe,this),Object(L.a)(this,"status",Me,this),this.liveQuery=void 0,this.subscribe=Object(U.a)(I.a.mark((function e(){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new Te.a.Query("AirBox")).find().then((function(e){return t.replace(e.map((function(e){return t.db2model(e)})))})).then((function(){n.subscribe().then((function(e){t.liveQuery=e,e.on("create",(function(e){if(void 0!==e){var n=t.db2model(e);t.insert(n)}})),e.on("delete",(function(e){void 0!==e&&t.remove(e.get("objectId"))}))}))})).catch(Object(R.b)((function(){t.status="error"})));case 2:case"end":return e.stop()}}),e)}))),this.unSubscribe=function(){var e;null===(e=t.liveQuery)||void 0===e||e.unsubscribe()},Object(L.a)(this,"replace",Re,this),Object(L.a)(this,"insert",Fe,this),Object(L.a)(this,"remove",Ae,this),this.create=function(e){var t=new(Te.a.Object.extend("AirBox"));return t.set("content",e.content),t.set("boxType",e.boxType),t.set("refId",e.refId),t.set("refUrl",e.refUrl),t.save()},Object(L.a)(this,"createText",Ve,this),Object(L.a)(this,"createFile",Ee,this),this.delete=function(e){(Object(R.b)((function(){return t.status="loading"})),e.refId)&&Te.a.File.createWithoutData(e.refId).destroy();Te.a.Object.createWithoutData("AirBox",e.id).destroy()},Object(R.f)(this),void 0!==Te.a.applicationId&&void 0!==Te.a.applicationKey||O()&&Te.a.init({appId:g("U2FsdGVkX1/PnPqRu/oeYzTFO29twMC8ttrBe+gmlYQR8CN2Dd24tweTai2Ul1fxuePdi0AIyvfUvuSSLWlL8g=="),appKey:g("U2FsdGVkX18WN7yQQ+iPg+TJ36c9B4ro+22XKf4yMRJAluCifMz962Rmm4UI8Zc5")})}return Object(X.a)(e,[{key:"db2model",value:function(e){return{id:e.get("objectId"),content:e.get("content"),boxType:e.get("boxType"),refId:e.get("refId"),refUrl:e.get("refUrl")}}},{key:"boxes",get:function(){return this.models}},{key:"getStatue",get:function(){return this.status}}]),e}(),Xe=Object(M.a)(ze.prototype,"models",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Me=Object(M.a)(ze.prototype,"status",[R.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"loading"}}),Re=Object(M.a)(ze.prototype,"replace",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.models=t,e.status="done"}}}),Fe=Object(M.a)(ze.prototype,"insert",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.models.push(t),e.status="done"}}}),Ae=Object(M.a)(ze.prototype,"remove",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.models.findIndex((function(e){return e.id===t}));n>-1&&e.models.splice(n,1),e.status="done"}}}),Ve=Object(M.a)(ze.prototype,"createText",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){return e.status="loading",e.create({content:t,boxType:null!==n&&void 0!==n?n:"text/plain"})}}}),Ee=Object(M.a)(ze.prototype,"createFile",[R.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(U.a)(I.a.mark((function t(n){var r,i;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.status="loading",r=new Te.a.File(n.name,n,n.type),t.next=4,r.save();case 4:return i=t.sent,t.abrupt("return",e.create({content:i.name(),boxType:n.type,refId:i.id,refUrl:i.url()}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Object(M.a)(ze.prototype,"boxes",[R.c],Object.getOwnPropertyDescriptor(ze.prototype,"boxes"),ze.prototype),Object(M.a)(ze.prototype,"getStatue",[R.c],Object.getOwnPropertyDescriptor(ze.prototype,"getStatue"),ze.prototype),ze),Qe=new Be,He=i.a.createContext(Qe),Ke=function(e){var t=Array.from(e.matchAll(/https?:\/\/[-a-zA-Z0-9@:%._~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b[-a-zA-Z0-9()@:%_.~#?&//=]*/g));if(0===t.length)return Object(v.jsx)("span",{children:e});for(var n=[],r=0;r<t.length;r++){var i=t[r],c=e.slice(i.index,i.index+i[0].length);if(0===r&&i.index>0&&n.push(Object(v.jsx)("span",{children:e.slice(0,i.index)},"textSpan-begin")),r===t.length-1){var o=e.slice(i.index+c.length,e.length);n.push(Object(v.jsx)("a",{href:c,target:"_blank",rel:"noreferrer",children:c},"a-".concat(r)),Object(v.jsx)("span",{children:o},"textSpan-".concat(r)));break}var a=t[r+1],s=e.slice(i.index+c.length,a.index);n.push(Object(v.jsx)("a",{href:c,target:"_blank",rel:"noreferrer",children:c},"a-".concat(r)),Object(v.jsx)("span",{children:s},"textSpan-".concat(r)))}return n},Ne=function(e){return Object(v.jsx)("img",{src:e.refUrl,alt:e.content,height:200})},Je=function(e){var t=Object(r.useContext)(He);return Object(v.jsxs)("div",{style:{flex:"1 200px",boxSizing:"border-box",maxWidth:"100%",border:"1px solid",overflowWrap:"break-word"},children:[function(t){switch(t.boxType.split("/")[0]){case"text":return Ke(e.box.content);case"image":return Ne(e.box);default:return Ke(e.box.refUrl)}}(e.box),Object(v.jsx)("button",{onClick:function(){t.delete(e.box)},children:"Delete"}),Object(v.jsx)("button",{onClick:function(){navigator.clipboard.writeText(e.box.content)},children:"Copy"})]})},Ye=Object(ie.a)((function(){var e=Object(r.useContext)(He).boxes.map((function(e){return Object(v.jsx)(Je,{box:e},e.id)}));return Object(v.jsx)("div",{style:{display:"flex",flexWrap:"wrap",padding:"10px"},children:e})})),qe=Object(ie.a)((function(){switch(Object(r.useContext)(He).getStatue){case"loading":return Object(v.jsx)("p",{children:"Updating..."});case"error":return Object(v.jsx)("p",{children:"Error\ud83d\ude25"});default:return null}})),Ge=n(5),Ze=function(){var e=Object(r.useContext)(He),t=Object(r.useState)(""),n=Object(Ge.a)(t,2),c=n[0],o=n[1],a=i.a.createRef();return Object(v.jsxs)("div",{style:{border:"1px solid"},children:[Object(v.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.createText(c).catch((function(){alert("Fail to add")})),o("")},children:[Object(v.jsx)("input",{type:"text",placeholder:"Just type something\ud83d\ude0e",required:!0,value:c,onChange:function(e){return o(e.target.value)}}),Object(v.jsx)("input",{type:"submit"})]}),Object(v.jsxs)("form",{onSubmit:function(t){t.preventDefault(),a.current&&a.current.files&&e.createFile(a.current.files[0])},children:[Object(v.jsx)("input",{type:"file",ref:a}),Object(v.jsx)("input",{type:"submit"})]})]})};var _e=function(){var e=new Be;return Object(r.useEffect)((function(){return e.subscribe(),function(){e.unSubscribe()}})),Object(v.jsxs)(He.Provider,{value:e,children:[Object(v.jsx)(qe,{}),Object(v.jsx)(Ye,{}),Object(v.jsx)(Ze,{})]})},$e=function(){var e=Object(r.useState)(""),t=Object(Ge.a)(e,2),n=t[0],i=t[1],c=Object(b.g)(),o=Object(b.h)().state||"/";if(O())return c.goBack(),null;return Object(v.jsx)("div",{children:Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(e){return!!x(e)&&(localStorage.setItem("private key",e),!0)}(n)?c.replace(o):(i(""),alert("Invalid Key"))},children:[Object(v.jsx)("input",{type:"password",placeholder:"Enter password",autoComplete:"current-password",required:!0,value:n,onChange:function(e){return i(e.target.value)}}),Object(v.jsx)("input",{type:"submit"})]})})};function et(){return Object(v.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[Object(v.jsx)(tt,{}),Object(v.jsx)("div",{style:{flex:"1 auto"},children:Object(v.jsx)(r.Suspense,{fallback:Object(v.jsx)("div",{children:"Loading..."}),children:Object(v.jsxs)(b.d,{children:[Object(v.jsx)(b.b,{exact:!0,path:"/",render:function(){return Object(v.jsx)(y,{})}}),Object(v.jsx)(b.b,{path:"/login",render:function(){return Object(v.jsx)($e,{})}}),Object(v.jsx)(b.b,{path:"/calc",render:function(){return Object(v.jsx)(Oe,{})}}),Object(v.jsx)(nt,{path:"/movie",defaultComponent:We}),Object(v.jsx)(nt,{path:"/airbox",defaultComponent:_e})]})})})]})}function tt(){var e={color:"white",fontSize:20,textDecoration:"none",padding:8};return Object(v.jsxs)("nav",{style:{backgroundColor:"#1b1c1d",padding:8},children:[Object(v.jsx)(l.b,{style:e,to:"/",children:"Home"}),Object(v.jsx)(l.b,{style:e,to:"/calc",children:"Calc"}),Object(v.jsx)(l.b,{style:e,to:"/movie",children:"Movie"}),Object(v.jsx)(l.b,{style:e,to:"/airbox",children:"AirBox"})]})}var nt=function(e){var t=Object(b.h)();return Object(v.jsx)(b.b,Object(d.a)(Object(d.a)({},e),{},{path:e.path,render:function(){return O()?Object(v.jsx)(e.defaultComponent,{}):Object(v.jsx)(b.a,{to:{pathname:"/login",state:t.pathname}})}}))};o.a.render(Object(v.jsx)(l.a,{children:Object(v.jsx)(et,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");a?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):s(t,e)}))}}(),u()}},[[626,1,2]]]);
//# sourceMappingURL=main.77483326.chunk.js.map